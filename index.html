<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><style type="text/css">h1,h2,h3,h4,h5,h6,p,blockquote{margin:0;padding:0}body{font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB",Arial,sans-serif;font-size:13px;line-height:18px;color:#737373;margin:10px 13px 10px 13px}a{color:#0069d6}a:hover{color:#0050a3;text-decoration:none}a img{border:0}p{margin-bottom:9px}h1,h2,h3,h4,h5,h6{color:#404040;line-height:36px}h1{margin-bottom:18px;font-size:30px}h2{font-size:24px}h3{font-size:18px}h4{font-size:16px}h5{font-size:14px}h6{font-size:13px}hr{margin:0 0 19px;border:0;border-bottom:1px solid #ccc}blockquote{padding:13px 13px 21px 15px;margin-bottom:18px;font-family:georgia,serif;font-style:italic}blockquote:before{content:"C";font-size:40px;margin-left:-10px;font-family:georgia,serif;color:#eee}blockquote p{font-size:14px;font-weight:300;line-height:18px;margin-bottom:0;font-style:italic}code,pre{font-family:Monaco,Andale Mono,Courier New,monospace}code{background-color:#fee9cc;color:rgba(0,0,0,0.75);padding:1px 3px;font-size:12px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}pre{display:block;padding:14px;margin:0 0 18px;line-height:16px;font-size:11px;border:1px solid #d9d9d9;white-space:pre-wrap;word-wrap:break-word}pre code{background-color:#fff;color:#737373;font-size:11px;padding:0}@media screen and (min-width:768px){body{width:748px;margin:10px auto}}</style><title>qlcoder</title></head><body><h2 id="localstorage">八一下LocalStorage本地存储的卦</h2>
<p>摘自 <a href="http://www.alloyteam.com/2012/04/sth-about-localstorage/">腾讯全端 AlloyTeam 团队 Blog</a> 有删改</p><h4 id="">先看支持情况</h4><p><img src="http://pic002.cnblogs.com/images/2011/219983/2011052411384081.jpg" alt="" title="" /></p><h4 id="">为什么要用本地存储</h4>
<ul><li>本地存储和cookie一样提供了把数据保存到本地的能力，页面刷新或者关掉浏览器后，数据依然存在</li><li>大！虽然不同浏览器的标准可能不一样，主流的一般都在5~10M，比cookie的4k强多了</li><li>本地存储的数据不会被发到服务器，与cookie相比，节省带宽，加快响应速度</li></ul><script type="text/javascript">window.onload = function(){var elem = document.getElementById("encode");elem.innerHTML = decodeURI("%E6%89%80%E4%BB%A5%E6%9C%AC%E9%A2%98%E7%9A%84answer%E5%B0%B1%E6%98%AF%3Ccode%3E2621440%3C/code%3E");}</script>
<h4 id="">一些细节</h4><ul><li>本地存储只能存字符串数据，所有数据在写入的时候会被隐式调用toString方法转为字符串因此，需要存储json之类的数据时，需要自己做转换</li><li>不过需要注意的是，测试的时候需要把文件上传到服务器上（或者localhost），直接点开本地的HTML文件，是不行的</li>
<li>不同浏览器，分配给本地存储的空间是不一样的，譬如chrome是5M。这5M是整个子域共享的。例如<code>http://www.alloyteam.com/2012/</code>和<code>http://www.alloyteam.com/2015/</code>两个页面同在<code>www.alloyteam.com</code>域下</li><li>当本地存储满了，再往里面写数据，将会触发error（这点和cookie的表现不一样）</li><li>点击这里测试你的浏览器能存储多少字符 <a href="https://arty.name/localstorage.html">Test of localStorage limits/quota</a></li><li>一个unicode字符占2个字节（英文和中文一样），所以5M可以存储5*1024*1024/2=2621440个字符，包括key和value。<span id="encode"></span></li></ul></body></html>
